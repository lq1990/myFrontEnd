<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>04 web itcast - procedure</title>
    <script src="../js/konva.min.js"></script>
    <style>
      body {
        padding: 0;
        margin: 0;
        background-color: #f0f0f0;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>

    <script>
      var stage = new Konva.Stage({
        container: 'container',
        width: window.innerWidth,
        height: window.innerHeight
      });

      var layer = new Konva.Layer();
      stage.add(layer);

      var cenX = stage.width() / 2;
      var cenY = stage.height() / 2;

      // ============= 三个层：背景层、动画层、光照层 =============
      var bgLayer = new Konva.Layer();
      stage.add(bgLayer);

      // =============  背景层 =================
      var innerRadius = 252 / 2;
      var outerRadius = 220;
      var innerCircle = new Konva.Circle({
        x: cenX,
        y: cenY,
        radius: innerRadius,
        stroke: '#aaaa86',
        strokeWidth: 4,
        dash: [10, 4] // 设置虚线，10实4虚
      });
      bgLayer.add(innerCircle);

      var outerCircle = new Konva.Circle({
        x: cenX,
        y: cenY,
        radius: outerRadius,
        stroke: '#a5a581',
        strokeWidth: 4,
        dash: [10, 4] // 设置虚线，10实4虚
      });
      bgLayer.add(outerCircle);

      // 中心圆
      var cenCircle = new Konva.Circle({
        x: cenX,
        y: cenY,
        radius: 132 / 2,
        fill: '#525a82'
      });
      bgLayer.add(cenCircle);
      // 中心圆环
      var cenRing = new Konva.Ring({
        x: cenX,
        y: cenY,
        innerRadius: 132 / 2,
        outerRadius: 180 / 2,
        fill: '#e1e1e1',
        opacity: 0.9
      });
      bgLayer.add(cenRing);

      // 中心的文字
      var cenText = new Konva.Text({
        x: cenX - 180 / 2,
        y: cenY - 9,
        width: 180,
        align: 'center',
        text: 'Web FS',
        fontSize: 18,
        fontFamily: 'Microsoft YaHei',
        fontStyle: 'bold',
        fill: 'white'
      });
      bgLayer.add(cenText);

      bgLayer.draw();

      // ============= 动画层 ===================
      var animateLayer = new Konva.Layer();
      stage.add(animateLayer);


      var x0 = cenX + innerRadius * Math.cos((-60 * Math.PI) / 180);
      var y0 = cenY + innerRadius * Math.sin((-60 * Math.PI) / 180);
      var l2_html5_circle = new Konva.Circle({
        x: x0,
        y: y0,
        radius: 30,
        fill: '#fabb48',
        opacity: 0.8
      });

      animateLayer.add(l2_html5_circle);

      animateLayer.draw();
    </script>
  </body>
</html>
